(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{593:function(e,t,n){"use strict";var a=n(2),r=n(0),i=n.n(r);t.a=e=>{let t=e.color,n=void 0===t?a.m.gray90:t,r=e.height,s=void 0===r?14:r,d=e.width,l=void 0===d?14:d;return i.a.createElement("svg",{width:l,height:s,fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 14 14"},i.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 0a.75.75 0 00-.75.75v5.5H.75a.75.75 0 000 1.5h5.5v5.5a.75.75 0 001.5 0v-5.5h5.5a.75.75 0 000-1.5h-5.5V.75A.75.75 0 007 0z",fill:n}))}},623:function(e,t,n){"use strict";var a=n(6),r=n.n(a),i=n(14),s=n.n(i),d=n(15),l=n.n(d),c=n(3),o=n(2),u=(n(13),n(5)),p=n.n(u),m=n(23),v=(n(70),n(1)),b=n(20),g=n(0),f=n.n(g);var k={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"createUserAddress"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"CreateUserAddressInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"createUserAddress"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userAddress"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:138,source:{body:"mutation createUserAddress($input: CreateUserAddressInput!) {\n  createUserAddress(input: $input) {\n    userAddress {\n      id\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}};Object(v.object)({createUserAddress:Object(v.object)({userAddress:Object(v.object)({id:m.a})})});var h={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"deleteUserAddress"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"DeleteUserAddressInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"deleteUserAddress"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userAddressId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"userErrors"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:138,source:{body:"mutation deleteUserAddress($input: DeleteUserAddressInput!) {\n  deleteUserAddress(input: $input) {\n    userAddressId\n    userErrors\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}};Object(v.object)({deleteUserAddress:Object(v.object)({userAddressId:m.a,userErrors:Object(v.array)(v.string)})});var A={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"updatePreferredUserAddress"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UpdatePreferredUserAddressInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updatePreferredUserAddress"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"didUpdate"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:146,source:{body:"mutation updatePreferredUserAddress($input: UpdatePreferredUserAddressInput!) {\n  updatePreferredUserAddress(input: $input) {\n    didUpdate\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}};Object(v.object)({updatePreferredUserAddress:Object(v.object)({didUpdate:v.boolean})});var O={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"updateUserAddress"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UpdateUserAddressInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateUserAddress"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"didUpdate"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:119,source:{body:"mutation updateUserAddress($input: UpdateUserAddressInput!) {\n  updateUserAddress(input: $input) {\n    didUpdate\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}};Object(v.object)({updateUserAddress:Object(v.object)({didUpdate:v.boolean})});const S=()=>{var e,t;return e=void 0,t={refetchQueries:["getAllUserAddresses","getPreferredUserAddress","getSubscriptionsPage"]},Object(b.b)(k,e,t)},j=()=>{var e,t;return e=void 0,t={refetchQueries:["getAllUserAddresses","getPreferredUserAddress","getSubscriptionsPage"]},Object(b.b)(h,e,t)},y=()=>{var e,t;return e=void 0,t={refetchQueries:["getAllUserAddresses","getPreferredUserAddress","getSubscriptionsPage"]},Object(b.b)(O,e,t)},E=()=>{var e,t;return e=void 0,t={refetchQueries:["getAllUserAddresses","getPreferredUserAddress","getSubscriptionsPage"]},Object(b.b)(A,e,t)};var N=n(598),U=n(104),x=n(16),P=n(609),C=n(296),D=n(570),w=n(96),I=n(210),F=n(72),T=n(37),L=n.n(T),V=n(7),Q=n(73),R=n.n(Q);function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var W=e=>{const t=Object(g.useState)(""),n=l()(t,2),a=n[0],i=n[1],d=Object(g.useState)(""),u=l()(d,2),p=u[0],m=u[1],v=Object(g.useState)(""),b=l()(v,2),k=b[0],h=b[1],A=Object(g.useState)(""),O=l()(A,2),j=O[0],T=O[1],Q=Object(g.useState)(""),$=l()(Q,2),W=$[0],M=$[1],q=Object(g.useState)(""),J=l()(q,2),Y=J[0],_=J[1],B=Object(g.useState)(!1),H=l()(B,2),Z=H[0],K=H[1],X=Object(g.useState)(null),ee=l()(X,2),te=ee[0],ne=ee[1],ae=S(),re=y(),ie=E(),se=Object(N.b)().data,de=se?se.user.addresses:[];Object(g.useEffect)(()=>{const t=de.find(t=>t.id===e.id);t&&le(t)},[e.id,de]);const le=e=>{i(e.id||null),m(e.streetLine1),h(e.streetLine2),T(e.city),M(e.state),_(e.postalCode)},ce=function(){var t=s()(r.a.mark((function t(n){var i,s,d,l;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),e.resetCheckoutErrors&&e.resetCheckoutErrors("Shipping"),i={streetLine1:p,streetLine2:k,city:j,state:W,postalCode:Y},t.prev=3,!(s=R()(i,U.a))){t.next=8;break}return ne(s),t.abrupt("return");case 8:if(!a){t.next=15;break}return t.next=11,re({input:{userAddressId:a,patch:G({},i)}});case 11:V.a.info("address:update_user_address"),d=a,t.next=19;break;case 15:return t.next=17,ae({input:G({},i)});case 17:l=t.sent,d=L()(l,e=>e.data.createUserAddress.userAddress.id);case 19:if(!Z||!d){t.next=22;break}return t.next=22,ie({input:{userAddressId:d}});case 22:e.toggleForm&&e.toggleForm(),t.next=29;break;case 25:t.prev=25,t.t0=t.catch(3),Object(x.c)(t.t0),ne({server:["There was an issue. Please try again later."]});case 29:case"end":return t.stop()}}),t,null,[[3,25]])})));return function(e){return t.apply(this,arguments)}}(),oe=Object(g.useRef)();return f.a.createElement(D.a,{style:z.formWrapper,errors:te},f.a.createElement(F.a,{onSubmit:ce},f.a.createElement(F.a.Input,{inputProps:{placeholder:"Shipping Address",maxLength:35},onChange:e=>m(e.currentTarget.value),value:p,ref:oe,autoFocus:!0}),f.a.createElement(P.a,{address:p,inputRef:oe,selectAddressPrediction:le}),f.a.createElement(F.a.Input,{inputProps:{placeholder:"Address Line 2",maxLength:35},onChange:e=>h(e.currentTarget.value),value:k}),f.a.createElement(F.a.Input,{inputProps:{placeholder:"City"},onChange:e=>T(e.currentTarget.value),value:j}),f.a.createElement(F.a.Select,{inputProps:{placeholder:"State"},onChange:e=>M(e.currentTarget.value),options:o.z,value:W,style:z.halfMargin,half:!0,halfOnMobile:!0}),f.a.createElement(F.a.Input,{type:"tel",inputProps:{placeholder:"Zip",maxLength:5},onChange:e=>_(e.currentTarget.value),value:Y,half:!0,halfOnMobile:!0}),f.a.createElement("div",{className:Object(c.css)(z.centeredItems)},e.checkoutRender?f.a.createElement(w.a,{onClick:ce}," Save "):f.a.createElement(I.a,{onClick:ce},"Save"),e.toggleForm&&!e.checkoutRender&&f.a.createElement(f.a.Fragment,null," | ",f.a.createElement(I.a,{onClick:e.toggleForm},"Cancel")))),e.preferredAddressId&&e.preferredAddressId!==a&&f.a.createElement("div",{className:Object(c.css)(z.centeredItems)},f.a.createElement(C.a,{handleClick:()=>K(!Z),text:"Ship my next order here",checked:Z})))};const z=c.StyleSheet.create({formWrapper:{width:"100%",margin:"0",["@media "+o.D.mobile]:{padding:0,margin:0}},halfMargin:{marginRight:"5%"},centeredItems:{display:"flex",justifyContent:"center",marginTop:"2em",width:"100%"}});var M=n(575),q=n(593);const J=c.StyleSheet.create({header:{fontSize:20,margin:20,color:o.m.brightPurple,textAlign:"center"},none:{fontStyle:"italic",margin:20,textAlign:"center",color:o.m.darkGray},subSection:{padding:20,position:"relative",display:"flex",["@media "+o.D.mobile]:{padding:"20px 8px"}},bottomSection:{margin:"20px 0",position:"relative",["@media "+o.D.mobile]:{margin:"20px 0 20px"}},addressWrapper:{flexGrow:"1"},label:{color:o.m.grayText,fontStyle:"italic",fontSize:"0.9em",marginTop:"0.25em"},default:{backgroundColor:o.m.lightPurpleGray},padding:{padding:20,["@media "+o.D.mobile]:{padding:0}},shippingWarning:{fontSize:14,marginTop:20},button:{display:"grid",fontSize:"1rem",gridTemplateColumns:"auto 1fr",alignItems:"center",gap:"0.5em"}});t.a=e=>{const t=Object(g.useState)(!1),n=l()(t,2),a=n[0],i=n[1],d=Object(g.useState)(null),u=l()(d,2),p=u[0],m=u[1],v=Object(N.b)(),b=v.data,k=v.loading,h=v.refetch,A=j(),O=b?b.user.addresses:[],S=b?b.user.preferredAddress:null,y=e.updateConsultation;if(Object(g.useEffect)(()=>{y&&0===O.length&&i(!0)},[O,y]),Object(g.useEffect)(()=>{},[S]),k)return f.a.createElement(D.a,null,f.a.createElement("div",{className:Object(c.css)(J.padding)},"Loading addresses..."));const E=!a&&(!!O||e.hasNameAndTelephone);return f.a.createElement(f.a.Fragment,null,!e.updateConsultation&&f.a.createElement("div",{className:Object(c.css)(J.header)},"Saved addresses"),O.map((t,n)=>{const d=S&&t.id===S.id;return f.a.createElement("div",{className:Object(c.css)(J.subSection,d&&J.default),key:n},f.a.createElement("div",{className:Object(c.css)(J.addressWrapper)},f.a.createElement("p",null,t.streetLine1),f.a.createElement("p",null,t.streetLine2),f.a.createElement("p",null,t.city,", ",t.state," ",t.postalCode),d&&f.a.createElement("p",{className:Object(c.css)(J.label)},e.updateConsultation?"Shipping to this address":"Default address")),f.a.createElement("div",null,f.a.createElement(I.a,{onClick:()=>(e=>{const t=O.find(t=>t.id===e);m(t),i(!p||t!==p||!a)})(t.id)},"Edit"),O.length>1&&f.a.createElement(f.a.Fragment,null," | ",f.a.createElement(I.a,{onClick:(l=t.id,s()(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=4;break}return e.next=3,A({input:{userAddressId:l}});case 3:h();case 4:case"end":return e.stop()}}),e)}))))},"Delete"))));var l}),!O.length&&f.a.createElement("div",{className:Object(c.css)(J.none)},"You do not have any saved addresses."),f.a.createElement("div",{className:Object(c.css)(J.bottomSection)},E&&f.a.createElement(M.a,{tertiary:!0,style:J.button,onClick:()=>{m(null),i(!0)}},f.a.createElement(q.a,null)," Add Address"),a&&f.a.createElement(f.a.Fragment,null,e.showShippingWarning&&f.a.createElement("div",{className:Object(c.css)(J.shippingWarning)},"Your next order is processing. If you need to change your address for that shipment, please contact us via text or"," ",f.a.createElement("a",{href:"mailto:"+o.A},f.a.createElement(I.a,null,o.A)),"."),f.a.createElement(W,{toggleForm:()=>i(!1),id:p&&p.id,preferredAddressId:S&&S.id,resetCheckoutErrors:e.resetCheckoutErrors,checkoutRender:!!e.updateConsultation}))))}}}]);
//# sourceMappingURL=AddressPage~Cart~UserProfile.6feab9722855dd9d49c0.chunk.js.map